<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Dyno OS</title>

<style>
body{margin:0;background:black;color:white;font-family:Segoe UI,Arial;overflow:hidden}
#boot,#bios,#repair,#bsod{position:fixed;inset:0;display:none;align-items:center;justify-content:center;flex-direction:column;font-size:28px;background:black;z-index:9999}
#desktop{position:fixed;inset:0;display:none;background:linear-gradient(120deg,#050b18,#0b234a)}
#taskbar{position:absolute;bottom:0;width:100%;height:42px;background:#0a0d14;display:flex;align-items:center;padding:4px;overflow-x:auto}
button{background:#1a73e8;color:white;border:none;border-radius:6px;padding:6px 10px;margin-right:6px;cursor:pointer}
.window{width:420px;height:300px;background:#0f1118;border-radius:12px;position:absolute;box-shadow:0 0 20px black;overflow:hidden}
.title{background:#1a1d29;padding:6px;cursor:move;display:flex;justify-content:space-between}
.content{padding:8px;height:calc(100% - 30px);overflow:auto;font-family:consolas}
.close{color:#ff5555;cursor:pointer;font-weight:bold}
input{background:black;color:white;border:1px solid #333;width:95%}
#fx{position:fixed;inset:0;display:none;z-index:9000;background:black}
.flash{position:absolute;opacity:.9}

@keyframes shake{
0%{transform:translate(0,0)}
25%{transform:translate(8px,4px)}
50%{transform:translate(-8px,-4px)}
75%{transform:translate(5px,-5px)}
100%{transform:translate(0,0)}
}

.glitch{animation:shake .08s infinite;filter:hue-rotate(90deg) contrast(200%)}
</style>
</head>
<body>

<div id="bios">Dyno BIOS v0.1<br><small>checking memory…</small></div>
<div id="repair">Scanning and repairing drive C:<br><span id="rep">1%</span></div>
<div id="bsod" style="background:#0011aa">
:(<br>Dyno OS ran into a problem<br><small>collecting error info...</small>
</div>
<div id="boot">Dyno OS<br><small>booting...</small></div>
<div id="fx"></div>

<div id="desktop">
  <div id="taskbar"></div>
</div>

<script>
const coreApps=["cmd","taskmgr","paint","store"];
let installedApps=[...coreApps];

function bootSystem(msg){
desktop.style.display="none";
boot.style.display="flex";
boot.querySelector("small").innerText=msg||"booting...";
setTimeout(()=>{
boot.style.display="none";
desktop.style.display="block";
desktop.classList.add("glitch");
setTimeout(()=>desktop.classList.remove("glitch"),3000);
if(msg==="restoring...")notify("System","✅ Restored from last safe point");
},1500);
}

setTimeout(()=>bootSystem(),900);

function refreshTaskbar(){
taskbar.innerHTML="";
installedApps.forEach(app=>{
let b=document.createElement("button");
b.textContent=app+".exe";
b.onclick=()=>openApp(app);
taskbar.appendChild(b);
});
}
refreshTaskbar();

function createWindow(title,html,w=420,h=300){
let win=document.createElement("div");
win.className="window";
win.style.width=w+"px";
win.style.height=h+"px";
win.style.top=Math.random()*200+"px";
win.style.left=Math.random()*300+"px";
win.innerHTML=`
<div class="title" onmousedown="drag(event,this.parentElement)">
${title}<span class="close" onclick="this.parentElement.parentElement.remove()">✖</span>
</div>
<div class="content">${html}</div>`;
desktop.appendChild(win);
}

function drag(e,w){
let x=e.clientX-w.offsetLeft,y=e.clientY-w.offsetTop;
document.onmousemove=e=>{w.style.left=e.clientX-x+"px";w.style.top=e.clientY-y+"px";}
document.onmouseup=()=>document.onmousemove=null;
}

function openApp(app){
if(app==="cmd")createWindow("cmd.exe",`
<div id="out">Dyno OS Terminal<br>help, apps, run &lt;app&gt;, close</div>
<input onkeydown="if(event.key==='Enter')cmdRun(this)">
`,520,320);

if(app==="taskmgr")createWindow("taskmgr.exe",installedApps.map(a=>a+".exe").join("<br>"));

if(app==="paint")createWindow("paint.exe",`
<canvas id="c" width="340" height="220" style="background:white"></canvas>
<script>
let c=document.getElementById("c"),x=c.getContext("2d"),d=false;
c.onmousedown=()=>d=true;c.onmouseup=()=>d=false;
c.onmousemove=e=>{if(d)x.fillRect(e.offsetX,e.offsetY,4,4);}
<\/script>`);

if(app==="store")createWindow("Dyno Store",`
<h3>Dyno App Store</h3>
<b>free-robux.exe</b><br>
<button onclick="installApp('free-robux')">Install</button>
<p id="smsg"></p>`);

if(app==="free-robux")startRobux();
}

function installApp(app){
if(installedApps.includes(app))return;
installedApps.push(app);
refreshTaskbar();
notify("Dyno Store","Installed "+app+".exe");
}

function cmdRun(box){
let out=box.previousElementSibling;
let t=box.value;
out.innerHTML+="<br>> "+t;
let a=t.split(" ");
let cmd=a[0];

if(cmd==="apps"){
out.innerHTML+="<br>"+installedApps.map(x=>x+".exe").join(" ");
}

else if(cmd==="run"){
openApp(a[1]?.replace(".exe",""));
}

else if(cmd==="close"){
document.querySelectorAll(".window").forEach(w=>w.remove());
out.innerHTML+="<br>All windows closed.";
}

else if(cmd==="help"){
out.innerHTML+="<br>apps, run <app>, close";
}

else{
out.innerHTML+="<br>unknown command";
}

box.value="";
}

/* ================= VIRUS ================= */

function startRobux(){
let fx=document.getElementById("fx");
fx.style.display="block";
fx.style.animation="shake .05s infinite";
document.body.style.cursor="none";
taskbar.innerHTML="SYSTEM FAILURE SYSTEM FAILURE SYSTEM FAILURE";

let chaos=setInterval(()=>{
fx.style.background=`hsl(${Math.random()*360},100%,50%)`;

for(let i=0;i<10;i++){
let b=document.createElement("div");
b.className="flash";
b.style.left=Math.random()*innerWidth+"px";
b.style.top=Math.random()*innerHeight+"px";
b.style.width=20+Math.random()*200+"px";
b.style.height=20+Math.random()*200+"px";
b.style.background=`hsl(${Math.random()*360},100%,50%)`;
fx.appendChild(b);
}

let txt=document.createElement("div");
txt.style.position="absolute";
txt.style.left=Math.random()*innerWidth+"px";
txt.style.top=Math.random()*innerHeight+"px";
txt.innerText=Math.random()>0.5?"DELETING SYSTEM32":"MEMORY CORRUPTION";
fx.appendChild(txt);

while(fx.children.length>200)fx.removeChild(fx.firstChild);

/* windows multiplying */
if(Math.random()>.7){
createWindow("error.exe","FATAL SYSTEM ERROR",260,140);
}
},40);

/* fake bios */
setTimeout(()=>{
clearInterval(chaos);
fx.style.display="none";
bios.style.display="flex";
},9000);

/* disk repair */
setTimeout(()=>{
bios.style.display="none";
repair.style.display="flex";
let p=1;
let iv=setInterval(()=>{
p++;
rep.innerText=p+"%";
if(p>100){clearInterval(iv);}
},40);
},12000);

/* bsod */
setTimeout(()=>{
repair.style.display="none";
bsod.style.display="flex";
},17000);

/* reboot */
setTimeout(()=>{
bsod.style.display="none";
document.body.style.cursor="default";
taskbar.innerHTML="";
refreshTaskbar();
bootSystem("restoring...");
},21000);
}

/* notification */
function notify(title,text){
let n=document.createElement("div");
n.className="window";
n.style.width="300px";
n.style.height="150px";
n.style.top="120px";
n.style.left="120px";
n.innerHTML=`
<div class="title" onmousedown="drag(event,this.parentElement)">
${title}<span class="close" onclick="this.parentElement.parentElement.remove()">✖</span>
</div>
<div class="content">${text}</div>`;
desktop.appendChild(n);
}
</script>
</body>
</html>
